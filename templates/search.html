{% extends 'layout.html' %}

{% block content %}
<div class="text-center mb-5">
    <h1 class="display-5 fw-bold">Search Products</h1>
    <div class="col-lg-6 mx-auto">
        <p class="lead">Enter the name of an American product to find non-American alternatives.</p>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-lg-8 col-md-10">
        <div class="card border-0 shadow-sm">
            <div class="card-body p-4">
                <form action="{{ url_for('search_results') }}" method="post" class="needs-validation" novalidate>
                    <div class="input-group mb-3">
                        <input type="text" class="form-control search-box" name="product_name" placeholder="Enter product name (e.g., Coca-Cola, Doritos)" required>
                        <button class="btn btn-primary search-button" type="submit">
                            <i class="fas fa-search me-2"></i> Search
                        </button>
                    </div>
                    <div class="invalid-feedback">
                        Please enter a product name.
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="mt-5">
    <h2 class="text-center mb-4">Popular American Products</h2>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        <!-- Popular product cards -->
        <div class="col">
            <div class="product-card card h-100 border-0 shadow-sm">
                <div class="product-image-container bg-dark p-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 512 512" class="text-danger">
                        <path fill="currentColor" d="M256 23.05C113.6 23.05 0 136.6 0 279.1c0 109.9 69.78 203.1 167.3 239.4 5.473 2.781 12.39 1.031 16.83-3.5 4.438-4.5 6.25-11.5 3.625-17.37-2.5-5.5-3.875-12.56-3.875-19.56 0-10.31 3.375-19.66 8.875-27.31 3.281-4.594 2.688-10.66-1.375-14.69-4.062-4-10.12-4.844-15.03-1.688-14.38 8.875-31.03 14.69-49.41 14.69-51.01 0-92.94-41.97-96.38-94.69h33.75c5.875 0 10.59-4.781 10.59-10.69v-40.72c0-5.875-4.719-10.69-10.59-10.69H30.56C34 240.4 75.94 198.4 127 198.4c18.38 0 35.06 5.844 49.41 14.69 4.906 3.156 10.97 2.281 15.03-1.688 4.062-4.031 4.656-10.09 1.375-14.69-5.5-7.656-8.875-17-8.875-27.31 0-7 1.375-14.06 3.875-19.56 2.625-5.875.8125-12.81-3.625-17.37-4.438-4.5-11.36-6.281-16.83-3.5C69.8 162.1 0 256.3 0 366.2c0 67.94 29.72 129 76.81 171.7.0313 0 .0313.031.0625.031C121.4 577.1 185.7 599.1 256 599.1s134.6-22 181.2-61.16c.0313 0 .0313-.0313.0625-.0313 47.09-42.72 76.81-103.8 76.81-171.7 0-109.9-69.78-203.1-167.3-239.4-5.473-2.781-12.39-1.031-16.83 3.5-4.438 4.5-6.25 11.5-3.625 17.37 2.5 5.5 3.875 12.56 3.875 19.56 0 10.31-3.375 19.69-8.875 27.31-3.281 4.594-2.688 10.66 1.375 14.69 4.062 4 10.12 4.844 15.03 1.688 14.34-8.875 31-14.69 49.41-14.69 51.01 0 92.94 41.97 96.38 94.69h-33.75c-5.875 0-10.59 4.781-10.59 10.69v40.72c0 5.875 4.719 10.69 10.59 10.69h32.91c-3.438 52.72-45.38 94.69-96.38 94.69-18.38 0-35.06-5.844-49.41-14.69-4.906-3.156-10.97-2.281-15.03 1.688-4.062 4.031-4.656 10.09-1.375 14.69 5.5 7.656 8.875 17 8.875 27.31 0 7-1.375 14.06-3.875 19.56-2.625 5.875-.8125 12.81 3.625 17.37 4.438 4.5 11.36 6.281 16.83 3.5 97.5-36.28 167.3-129.5 167.3-239.4-.0001-142.5-113.6-256.1-256-256.1zm-10.59 320.6h21.19c5.875 0 10.59-4.781 10.59-10.69v-40.72c0-5.875-4.719-10.69-10.59-10.69h-21.19c-5.875 0-10.59 4.812-10.59 10.69v40.72c0 5.906 4.719 10.69 10.59 10.69z"/>
                    </svg>
                </div>
                <div class="card-body">
                    <h5 class="card-title">Coca-Cola</h5>
                    <p class="card-text">Popular carbonated soft drink manufactured by The Coca-Cola Company in the United States.</p>
                    <form action="{{ url_for('search_results') }}" method="post">
                        <input type="hidden" name="product_name" value="Coca-Cola">
                        <button type="submit" class="btn btn-outline-primary">Find Alternatives</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col">
            <div class="product-card card h-100 border-0 shadow-sm">
                <div class="product-image-container bg-dark p-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 512 512" class="text-warning">
                        <path fill="currentColor" d="M440 64H72c-22.09 0-40 17.91-40 40v304c0 22.09 17.91 40 40 40h368c22.09 0 40-17.91 40-40V104c0-22.09-17.91-40-40-40zm-16 112c0 4.418-3.582 8-8 8H96c-4.418 0-8-3.582-8-8v-16c0-4.418 3.582-8 8-8h320c4.418 0 8 3.582 8 8v16zm0 128c0 4.418-3.582 8-8 8H96c-4.418 0-8-3.582-8-8v-16c0-4.418 3.582-8 8-8h320c4.418 0 8 3.582 8 8v16zm0 96c0 4.418-3.582 8-8 8H96c-4.418 0-8-3.582-8-8v-16c0-4.418 3.582-8 8-8h320c4.418 0 8 3.582 8 8v16z"/>
                    </svg>
                </div>
                <div class="card-body">
                    <h5 class="card-title">Doritos</h5>
                    <p class="card-text">Flavored tortilla chips produced by Frito-Lay, a wholly owned subsidiary of PepsiCo.</p>
                    <form action="{{ url_for('search_results') }}" method="post">
                        <input type="hidden" name="product_name" value="Doritos">
                        <button type="submit" class="btn btn-outline-primary">Find Alternatives</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col">
            <div class="product-card card h-100 border-0 shadow-sm">
                <div class="product-image-container bg-dark p-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewBox="0 0 512 512" class="text-light">
                        <path fill="currentColor" d="M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"/>
                    </svg>
                </div>
                <div class="card-body">
                    <h5 class="card-title">Hershey's</h5>
                    <p class="card-text">American chocolate brand and one of the largest chocolate manufacturers in the world.</p>
                    <form action="{{ url_for('search_results') }}" method="post">
                        <input type="hidden" name="product_name" value="Hershey's">
                        <button type="submit" class="btn btn-outline-primary">Find Alternatives</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card mt-5 bg-dark text-light border-0">
    <div class="card-body p-4">
        <h3 class="card-title">Don't see your product?</h3>
        <p class="card-text">Try using the camera scan feature to identify products visually.</p>
        <a href="{{ url_for('scan') }}" class="btn btn-primary">
            <i class="fas fa-camera me-2"></i> Scan Product
        </a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Validate form on submission
(function() {
    'use strict';
    window.addEventListener('load', function() {
        // Get all forms we want to apply custom validation
        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    }, false);
})();
</script>
{% endblock %}
